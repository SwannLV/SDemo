{"filter":false,"title":"buffer-loader.js","tooltip":"/libs/buffer-loader.js","undoManager":{"mark":4,"position":4,"stack":[[{"group":"doc","deltas":[{"start":{"row":0,"column":0},"end":{"row":44,"column":1},"action":"remove","lines":["","function BufferLoader(context, urlList, callback) {","    this.context = context;","    this.urlList = urlList;","    this.onload = callback;","    this.bufferList = new Array();","    this.loadCount = 0;","}","","BufferLoader.prototype.loadBuffer = function(url, index) {","    // Load buffer asynchronously","    var request = new XMLHttpRequest();","    request.open(\"GET\", url, true);","    request.responseType = \"arraybuffer\";","","    var loader = this;","","    request.onload = function() {","        var buffer;","        try {","            buffer = loader.context.createBuffer(request.response, false);","        } catch(e) {","            alert('error decoding file data: ' + url);","        }","","        try {","            loader.bufferList[index] = buffer;","            if (++loader.loadCount == loader.urlList.length)","                loader.onload(loader.bufferList);","        } catch(e) {","            alert('BufferLoader: callback problem');","        }","    }","","    request.onerror = function() {","        alert('BufferLoader: XHR error');        ","    }","","    request.send();","}","","BufferLoader.prototype.load = function() {","    for (var i = 0; i < this.urlList.length; ++i)","        this.loadBuffer(this.urlList[i], i);","}"]},{"start":{"row":0,"column":0},"end":{"row":42,"column":1},"action":"insert","lines":["function BufferLoader(context, urlList, callback) {","    this.context = context;","    this.urlList = urlList;","    this.onload = callback;","    this.bufferList = new Array();","    this.loadCount = 0;","}","","BufferLoader.prototype.loadBuffer = function(url, index) {","    // Load buffer asynchronously","    var request = new XMLHttpRequest();","    request.open(\"GET\", url, true);","    request.responseType = \"arraybuffer\";","","    var loader = this;","","    request.onload = function() {","        // Asynchronously decode the audio file data in request.response","        loader.context.decodeAudioData(","            request.response,","            function(buffer) {","                if (!buffer) {","                    alert('error decoding file data: ' + url);","                    return;","                }","                loader.bufferList[index] = buffer;","                if (++loader.loadCount == loader.urlList.length)","                    loader.onload(loader.bufferList);","            }    ","        );","    }","","    request.onerror = function() {","        alert('BufferLoader: XHR error');        ","    }","","    request.send();","}","","BufferLoader.prototype.load = function() {","    for (var i = 0; i < this.urlList.length; ++i)","        this.loadBuffer(this.urlList[i], i);","}"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":16},"end":{"row":26,"column":17},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":17},"end":{"row":26,"column":18},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":17},"end":{"row":26,"column":18},"action":"remove","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":26,"column":16},"end":{"row":26,"column":17},"action":"remove","lines":["/"]}]}]]},"ace":{"folds":[],"scrolltop":60,"scrollleft":0,"selection":{"start":{"row":24,"column":17},"end":{"row":24,"column":17},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":3,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1419028347697,"hash":"b000cc3df65d4a75da5a7ea8daaf3e1c2a21d80d"}